{"ast":null,"code":"import React,{useState}from'react';import{useNavigate,useLocation}from'react-router-dom';import Header from'../components/Header';import RicercaPost from'../components/RicercaPost';import'../../styles/index.css';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ModificaPost(_ref){let{username}=_ref;const navigate=useNavigate();const location=useLocation();const id=location.state?location.state.id:null;;// Estrae id dallo stato, e gestisce il caso in cui sia undefined\nconst[file,setFile]=useState(null);const[titoloPostInsert,setTitoloPostInsert]=useState('');const[descrizionePostInsert,setDescrizionePostInsert]=useState('');const[immaginePostInsert,setImmaginePostInsert]=useState('');const[error,setError]=useState('');const[message,setMessage]=useState('');const filterRequestNew=async elimina=>{const formData=new FormData();formData.append('idPost',id);formData.append('titoloPost',titoloPostInsert);formData.append('descrizionePost',descrizionePostInsert);formData.append('elimina',elimina);if(file){formData.append('file',file);// Aggiungi il file se presente\n}try{const response=await axios.post(`http://localhost:3000/api/changePostNew`,formData,{headers:{'Content-Type':'multipart/form-data'}});const data=response.data;if(response.status===200){setError('');setMessage('Operazione completata con successo.');}else{setError(data.message||'Errore sconosciuto.');}}catch(error){console.error('Errore durante la richiesta:',error);setError('Errore del server.');}};const handleSubmit=async e=>{e.preventDefault();};const handleClick=t=>{switch(t){case'modifica':filterRequestNew(false);navigate('/backoffice');break;case'elimina':filterRequestNew(true);navigate('/backoffice');break;}};const loginRedirect=()=>{navigate('/');};return/*#__PURE__*/_jsxs(\"div\",{className:\"paginaIntera\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"welcome\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Ciao \",username,\", sei pronto a modificare/eliminare il post?\"]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:loginRedirect,children:\"LOGOUT\"})]}),/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:handleSubmit,encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"titoloPostToInsert\",placeholder:\"Titolo\",onChange:e=>{setTitoloPostInsert(e.target.value);}}),/*#__PURE__*/_jsx(\"textarea\",{name:\"descrizionePostToInsert\",placeholder:\"Descrizione\",onChange:e=>{setDescrizionePostInsert(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"immaginePostToInsert\",id:\"file\",onChange:e=>{setFile(e.target.files[0]);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",name:\"Annulla\",onClick:()=>handleClick('annulla'),children:\"Annulla Modifiche\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",name:\"modificaPost\",onClick:()=>handleClick('modifica'),children:\"Modifica Post\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",name:\"eliminaPost\",onClick:()=>handleClick('elimina'),children:\"Elimina Post\"})]})]});}export default ModificaPost;","map":{"version":3,"names":["React","useState","useNavigate","useLocation","Header","RicercaPost","axios","jsx","_jsx","jsxs","_jsxs","ModificaPost","_ref","username","navigate","location","id","state","file","setFile","titoloPostInsert","setTitoloPostInsert","descrizionePostInsert","setDescrizionePostInsert","immaginePostInsert","setImmaginePostInsert","error","setError","message","setMessage","filterRequestNew","elimina","formData","FormData","append","response","post","headers","data","status","console","handleSubmit","e","preventDefault","handleClick","t","loginRedirect","className","children","type","onClick","action","onSubmit","encType","name","placeholder","onChange","target","value","files"],"sources":["/Users/matteo/Documents/personal_blog/frontend/src/site/react/pages/ModificaPost.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport Header from '../components/Header';\nimport RicercaPost from '../components/RicercaPost';\nimport '../../styles/index.css';\nimport axios from 'axios';\n\nfunction ModificaPost({username}) {\n\n    const navigate = useNavigate();\n    const location = useLocation();\n    const id = location.state ? location.state.id : null;; // Estrae id dallo stato, e gestisce il caso in cui sia undefined\n\n    const [file, setFile] = useState(null);\n    const [titoloPostInsert, setTitoloPostInsert] = useState('');\n    const [descrizionePostInsert, setDescrizionePostInsert] = useState('');\n    const [immaginePostInsert, setImmaginePostInsert] = useState('');\n    const [error, setError] = useState('');\n    const [message, setMessage] = useState('');\n\n    const filterRequestNew = async (elimina) => {\n        const formData = new FormData();\n    \n        formData.append('idPost', id);\n        formData.append('titoloPost', titoloPostInsert);\n        formData.append('descrizionePost', descrizionePostInsert);\n        formData.append('elimina', elimina);\n        \n        if (file) {\n            formData.append('file', file); // Aggiungi il file se presente\n        }\n    \n        try {\n            const response = await axios.post(\n                `http://localhost:3000/api/changePostNew`,\n                formData,\n                {\n                    headers: {\n                        'Content-Type': 'multipart/form-data',\n                    },\n                }\n            );\n    \n            const data = response.data;\n    \n            if (response.status === 200) {\n                setError('');\n                setMessage('Operazione completata con successo.');\n            } else {\n                setError(data.message || 'Errore sconosciuto.');\n            }\n        } catch (error) {\n            console.error('Errore durante la richiesta:', error);\n            setError('Errore del server.');\n        }\n    };\n    \n\n    const handleSubmit = async (e) => {\n\n        e.preventDefault();\n\n    }\n\n    const handleClick = (t) => {\n\n        switch(t){\n\n            case 'modifica':\n\n\n                filterRequestNew(false);\n\n                navigate('/backoffice');\n\n                break;\n\n\n            case 'elimina':\n\n                filterRequestNew(true);\n\n                navigate('/backoffice');\n\n                break;\n        }\n    }\n\n\n    const loginRedirect = () => {\n  \n      navigate('/');\n    };\n\n    return (\n\n        <div className='paginaIntera'>\n        \n            <Header />\n\n            <div className='welcome'>\n                <h2>Ciao {username}, sei pronto a modificare/eliminare il post?</h2>\n                <button type='button' onClick={loginRedirect}>\n                    LOGOUT\n                </button>\n            </div>\n\n            <form action='' onSubmit={handleSubmit} encType='multipart/form-data'>\n\n                <input type='text' name='titoloPostToInsert' placeholder='Titolo' onChange={(e) => {\n\n                    setTitoloPostInsert(e.target.value);\n\n                }}/>\n                <textarea name='descrizionePostToInsert' placeholder='Descrizione' onChange={(e) => {\n\n                    setDescrizionePostInsert(e.target.value);\n\n                }}/>\n\n                <input type='file' name='immaginePostToInsert' id='file'\n\n                    onChange={(e) => {\n\n                        setFile(e.target.files[0]);\n                    }}\n                />\n                <button type='submit' name='Annulla' onClick={() => handleClick('annulla')}>Annulla Modifiche</button>\n                <button type='submit' name='modificaPost' onClick={() => handleClick('modifica')}>Modifica Post</button>\n                <button type='submit' name='eliminaPost' onClick={() => handleClick('elimina')}>Elimina Post</button>\n\n            </form>\n        \n        </div>\n    \n        \n\n    );\n\n}\n\n\nexport default ModificaPost;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}