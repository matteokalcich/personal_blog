{"ast":null,"code":"import React,{useState}from'react';import{useNavigate,useLocation}from'react-router-dom';import Header from'../components/Header';import RicercaPost from'../components/RicercaPost';import'../../styles/index.css';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function CreazionePost(){const navigate=useNavigate();const location=useLocation();const id=location.state?location.state.id:null;// Estrae id dallo stato, e gestisce il caso in cui sia undefined\nconst[immagine,setimmagine]=useState(null);const[titoloPostInsert,setTitoloPostInsert]=useState('');const[descrizionePostInsert,setDescrizionePostInsert]=useState('');const[error,setError]=useState('');const[message,setMessage]=useState('');const filterRequestNew=async()=>{const formData=new FormData();formData.append('idPost',id);formData.append('titoloPost',titoloPostInsert);formData.append('descrizionePost',descrizionePostInsert);if(immagine){formData.append('file',immagine);// Aggiungi il immagine se presente\n}try{const response=await axios.post(`http://localhost:3000/api/createPost`,formData,{headers:{'Content-Type':'multipart/form-data'}});if(response.status===200){setError('');setMessage('Operazione completata con successo.');}else{setError(response.message||'Errore sconosciuto.');}}catch(error){console.error('Errore durante la richiesta:',error);setError('Errore del server.');}};const handleSubmit=async e=>{e.preventDefault();};const handleClick=t=>{switch(t){case'crea':filterRequestNew(false);navigate('/backoffice');break;case'annulla':navigate('/backoffice');break;}};const loginRedirect=()=>{navigate('/');};return/*#__PURE__*/_jsxs(\"div\",{className:\"paginaIntera\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"welcome\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Ciao, sei pronto a creare un post?\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:loginRedirect,children:\"LOGOUT\"})]}),/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:handleSubmit,encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"titoloPostToInsert\",placeholder:\"Titolo\",onChange:e=>{setTitoloPostInsert(e.target.value);}}),/*#__PURE__*/_jsx(\"textarea\",{name:\"descrizionePostToInsert\",placeholder:\"Descrizione\",onChange:e=>{setDescrizionePostInsert(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"immaginePostToInsert\",id:\"file\",onChange:e=>{setimmagine(e.target.files[0]);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",name:\"Annulla\",onClick:()=>handleClick('annulla'),children:\"Annulla Modifiche\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",name:\"creaPost\",onClick:()=>handleClick('crea'),children:\"Crea Post\"})]})]});}export default CreazionePost;","map":{"version":3,"names":["React","useState","useNavigate","useLocation","Header","RicercaPost","axios","jsx","_jsx","jsxs","_jsxs","CreazionePost","navigate","location","id","state","immagine","setimmagine","titoloPostInsert","setTitoloPostInsert","descrizionePostInsert","setDescrizionePostInsert","error","setError","message","setMessage","filterRequestNew","formData","FormData","append","response","post","headers","status","console","handleSubmit","e","preventDefault","handleClick","t","loginRedirect","className","children","type","onClick","action","onSubmit","encType","name","placeholder","onChange","target","value","files"],"sources":["/Users/matteo/Documents/personal_blog/frontend/src/site/react/pages/CreazionePost.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport Header from '../components/Header';\nimport RicercaPost from '../components/RicercaPost';\nimport '../../styles/index.css';\nimport axios from 'axios';\n\nfunction CreazionePost() {\n\n    const navigate = useNavigate();\n    const location = useLocation();\n    const id = location.state ? location.state.id : null; // Estrae id dallo stato, e gestisce il caso in cui sia undefined\n\n    const [immagine, setimmagine] = useState(null);\n    const [titoloPostInsert, setTitoloPostInsert] = useState('');\n    const [descrizionePostInsert, setDescrizionePostInsert] = useState('');\n    const [error, setError] = useState('');\n    const [message, setMessage] = useState('');\n\n    const filterRequestNew = async () => {\n        const formData = new FormData();\n    \n        formData.append('idPost', id);\n        formData.append('titoloPost', titoloPostInsert);\n        formData.append('descrizionePost', descrizionePostInsert);\n        \n        if (immagine) {\n            formData.append('file', immagine); // Aggiungi il immagine se presente\n        }\n    \n        try {\n            const response = await axios.post(\n                `http://localhost:3000/api/createPost`,\n                formData,\n                {\n                    headers: {\n                        'Content-Type': 'multipart/form-data',\n                    },\n                }\n            );\n    \n            if (response.status === 200) {\n                setError('');\n                setMessage('Operazione completata con successo.');\n            } else {\n                setError(response.message || 'Errore sconosciuto.');\n            }\n        } catch (error) {\n            console.error('Errore durante la richiesta:', error);\n            setError('Errore del server.');\n        }\n    };\n    \n\n    const handleSubmit = async (e) => {\n\n        e.preventDefault();\n\n    }\n\n    const handleClick = (t) => {\n\n        switch(t){\n\n            case 'crea':\n\n\n                filterRequestNew(false);\n\n                navigate('/backoffice');\n\n                break;\n\n\n            case 'annulla':\n\n                navigate('/backoffice');\n\n                break;\n        }\n    }\n\n\n    const loginRedirect = () => {\n  \n      navigate('/');\n    };\n\n    return (\n\n        <div className='paginaIntera'>\n        \n            <Header />\n\n            <div className='welcome'>\n                <h2>Ciao, sei pronto a creare un post?</h2>\n                <button type='button' onClick={loginRedirect}>\n                    LOGOUT\n                </button>\n            </div>\n\n            <form action='' onSubmit={handleSubmit} encType='multipart/form-data'>\n\n                <input type='text' name='titoloPostToInsert' placeholder='Titolo' onChange={(e) => {\n\n                    setTitoloPostInsert(e.target.value);\n\n                }}/>\n                <textarea name='descrizionePostToInsert' placeholder='Descrizione' onChange={(e) => {\n\n                    setDescrizionePostInsert(e.target.value);\n\n                }}/>\n\n                <input type='file' name='immaginePostToInsert' id='file'\n\n                    onChange={(e) => {\n\n                        setimmagine(e.target.files[0]);\n                    }}\n                />\n                \n                <button type='submit' name='Annulla' onClick={() => handleClick('annulla')}>Annulla Modifiche</button>\n                <button type='submit' name='creaPost' onClick={() => handleClick('crea')}>Crea Post</button>\n\n            </form>\n        \n        </div>\n    \n        \n\n    );\n\n}\n\n\nexport default CreazionePost;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}